{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/aksha/Dropbox/My%20PC%20%28DESKTOP-0ECVODK%29/Downloads/newsletter%202.0/newsletter/src/app/unsubscribe/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\n\r\nexport default function Unsubscribe() {\r\n  const searchParams = useSearchParams();\r\n  const tokenFromURL = searchParams.get(\"token\"); // Token from email link\r\n  const [email, setEmail] = useState(\"\");\r\n  const [token, setToken] = useState(tokenFromURL || \"\"); // Support both methods\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (tokenFromURL) {\r\n      handleUnsubscribe(tokenFromURL);\r\n    }\r\n  }, [tokenFromURL]);\r\n\r\n  const handleUnsubscribe = async (tokenToUse: string) => {\r\n    if (!tokenToUse) {\r\n      setMessage(\"Missing unsubscribe token.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setMessage(\"Processing...\");\r\n\r\n    try {\r\n      const response = await fetch(\r\n        \"https://xgbfuvduzaljhyepdmyk.supabase.co/functions/v1/newsletter_unsubscribe\",\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({ unsubscribe_token: tokenToUse }),\r\n        }\r\n      );\r\n\r\n      const data = await response.json();\r\n      setMessage(data.message || \"Successfully unsubscribed!\");\r\n    } catch (error) {\r\n      setMessage(\"Failed to unsubscribe. Please try again.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    handleUnsubscribe(token || email);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white p-6 rounded-md shadow-md max-w-md mx-auto mt-10\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Unsubscribe</h2>\r\n      {message }\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAFA;;;AAIe,SAAS;;IACtB,MAAM,eAAe,CAAA,GAAA,qIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,eAAe,aAAa,GAAG,CAAC,UAAU,wBAAwB;IACxE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,gBAAgB,KAAK,uBAAuB;IAC/E,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,IAAI,cAAc;gBAChB,kBAAkB;YACpB;QACF;gCAAG;QAAC;KAAa;IAEjB,MAAM,oBAAoB,OAAO;QAC/B,IAAI,CAAC,YAAY;YACf,WAAW;YACX;QACF;QAEA,WAAW;QACX,WAAW;QAEX,IAAI;YACF,MAAM,WAAW,MAAM,MACrB,gFACA;gBACE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,mBAAmB;gBAAW;YACvD;YAGF,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,WAAW,KAAK,OAAO,IAAI;QAC7B,EAAE,OAAO,OAAO;YACd,WAAW;QACb,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,kBAAkB,SAAS;IAC7B;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;YACvC;;;;;;;AAGP;GArDwB;;QACD,qIAAA,CAAA,kBAAe;;;KADd","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/aksha/Dropbox/My%20PC%20%28DESKTOP-0ECVODK%29/Downloads/newsletter%202.0/newsletter/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}